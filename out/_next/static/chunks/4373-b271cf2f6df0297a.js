"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4373],{14373:function(e,n,r){r.r(n);var t=r(85893),o=r(67294),a=r(79172),i=r(86886),s=r(11496),u=r(50135),l=r(44267),c=r(83321),d=r(42283),m=r(94054),h=r(56815),f=r(74231),x=r(69702),g=r(15861),p=r(57438),v=r(98903),Z=r(74931),b=r(95496),j=r(17288),_=r(83053);function y(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function P(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){y(e,n,r[n])}))}return e}var w=(0,s.ZP)("img")((function(e){var n=e.theme;return{width:120,height:120,marginRight:n.spacing(5),borderRadius:n.shape.borderRadius}})),B=(0,s.ZP)(c.Z)((function(e){return y({},e.theme.breakpoints.down("sm"),{width:"100%",textAlign:"center"})})),C=(0,s.ZP)(c.Z)((function(e){var n=e.theme;return y({marginLeft:n.spacing(4)},n.breakpoints.down("sm"),{width:"100%",marginLeft:0,textAlign:"center",marginTop:n.spacing(4)})})),k=f.Ry().shape({name:f.Z_().required("\u0646\u0627\u0645 \u0627\u0644\u0632\u0627\u0645\u06cc \u0627\u0633\u062a"),fax:f.Z_().required("\u0641\u06af\u0633 \u0627\u0644\u0632\u0627\u0645\u06cc \u0627\u0633\u062a").matches(/^[0-9]*$/," \u0628\u0627\u06cc\u062f \u0639\u062f\u062f \u0628\u0627\u0634\u062f"),state:f.Z_().required("\u0627\u0633\u062a\u0627\u0646 \u0627\u0644\u0632\u0627\u0645\u06cc \u0627\u0633\u062a"),city:f.Z_().required("\u0634\u0647\u0631 \u0627\u0644\u0632\u0627\u0645\u06cc \u0627\u0633\u062a"),tel_phone:f.Z_().required("\u062a\u0644\u0641\u0646 \u0627\u0644\u0632\u0627\u0645\u06cc \u0627\u0633\u062a").matches(/^[0-9]*$/," \u0628\u0627\u06cc\u062f \u0639\u062f\u062f \u0628\u0627\u0634\u062f"),economic_code:f.Z_().required("\u0627\u0644\u0632\u0627\u0645\u06cc \u0627\u0633\u062a").typeError("\u0628\u0647 \u062f\u0631\u0633\u062a\u06cc \u0648\u0627\u0631\u062f \u0646\u0645\u0627\u06cc\u06cc\u062f").min(2,"\u0628\u0647 \u062f\u0631\u0633\u062a\u06cc \u0648\u0627\u0632\u062f \u0646\u0645\u0627\u06cc\u06cc\u062f"),management_name:f.Z_().required("\u0627\u0644\u0632\u0627\u0645\u06cc \u0627\u0633\u062a").typeError("\u0628\u0647 \u062f\u0631\u0633\u062a\u06cc \u0648\u0627\u0631\u062f \u0646\u0645\u0627\u06cc\u06cc\u062f").min(5,"\u0628\u0647 \u062f\u0631\u0633\u062a\u06cc \u0648\u0627\u0632\u062f \u0646\u0645\u0627\u06cc\u06cc\u062f"),registration_number:f.Z_().typeError("\u0628\u0647 \u062f\u0631\u0633\u062a\u06cc \u0648\u0627\u0631\u062f \u0646\u0645\u0627\u06cc\u06cc\u062f"),workshop_number:f.Z_().typeError("\u0628\u0647 \u062f\u0631\u0633\u062a\u06cc \u0648\u0627\u0631\u062f \u0646\u0645\u0627\u06cc\u06cc\u062f")});n.default=function(){var e=(0,o.useState)(!1),n=e[0],r=e[1],s=(0,o.useState)(""),f=s[0],y=s[1],q=(0,o.useState)(""),S=q[0],E=q[1],W=(0,j.a)().user.hub_id,Q=(0,o.useState)({name:"",fax:"",tel_phone:"",state:"",city:"",address:"",economic_code:"",management_name:"",registration_number:"",workshop_number:""}),O=Q[0],I=Q[1],L=(0,o.useState)(""),A=L[0],T=L[1],z={name:"",fax:"",tel_phone:"",state:"",city:""},D=(0,d.cI)({defaultValues:(0,o.useMemo)((function(){return O}),[I]),mode:"onChange",resolver:(0,b.X)(k)}),H=D.control,R=D.reset,N=D.handleSubmit,$=D.setError,F=D.formState.errors;return(0,o.useEffect)((function(){(0,_.fetchLogo)().then((function(e){return y(e.logo)})).catch((function(e){var n,r,t=(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)?e.response.data.message:"\u062e\u0637\u0627\u06cc\u06cc \u0631\u062e \u062f\u0627\u062f\u0647 \u0627\u0633\u062a";Z.ZP.error(t)})),(0,_.fetchData)().then((function(e){null===e.data.hub?(r(!1),R(z)):(R(e.data.hub),y(e.data.hub.image),E(e.data.hub.image),T(e.data.hub.state),r(!0))})).catch((function(e){var n,r,t=(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)?e.response.data.message:"\u062e\u0637\u0627\u06cc\u06cc \u0631\u062e \u062f\u0627\u062f\u0647 \u0627\u0633\u062a";Z.ZP.error(t)}))}),[I,T]),(0,t.jsx)(l.Z,{children:n?(0,t.jsx)("form",{onSubmit:N((function(e){Z.ZP.promise((0,_.editHub)(W,e),{loading:"\u062f\u0631 \u062d\u0627\u0644 \u0648\u06cc\u0631\u0627\u06cc\u0634 \u0647\u0627\u0628",success:"\u0647\u0627\u0628 \u0648\u06cc\u0631\u0627\u06cc\u0634 \u0634\u062f",error:function(e){var n,r,t,o;return(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)?null===(t=e.response)||void 0===t||null===(o=t.data)||void 0===o?void 0:o.message:"\u062e\u0637\u0627\u06cc\u06cc \u0631\u062e \u062f\u0627\u062f\u0647 \u0627\u0633\u062a."}})})),children:(0,t.jsxs)(i.ZP,{container:!0,spacing:6,children:[(0,t.jsx)(i.ZP,{item:!0,xs:12,sx:{my:5},children:(0,t.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,t.jsx)(w,{src:""===f?"":f,alt:"Profile Pic"}),(0,t.jsxs)(a.Z,{children:[(0,t.jsxs)(B,{component:"label",variant:"contained",htmlFor:"account-settings-upload-image",children:["\u0628\u0627\u0631\u06af\u0630\u0627\u0631\u06cc \u0639\u06a9\u0633",(0,t.jsx)("input",{hidden:!0,type:"file",onChange:function(e){var n=e.target.files[0];if(n){var r=Z.ZP.loading("\u062f\u0631 \u062d\u0627\u0644 \u0628\u0627\u0631\u06af\u0630\u0627\u0631\u06cc \u0644\u0648\u06af\u0648"),t=new v.gq(n,{endpoint:"https://api.zaminbar.ir/files/",retryDelays:[0],metadata:{filename:n.name,filetype:n.type},onError:function(){$("hub_id",{type:"custom",message:"\u0645\u0634\u06a9\u0644 \u062f\u0631 \u0628\u0627\u0631\u06af\u0630\u0627\u06cc \u0639\u06a9\u0633. \u0645\u062c\u062f\u062f \u062a\u0644\u0627\u0634 \u06a9\u0646\u06cc\u062f"}),Z.ZP.dismiss(r),Z.ZP.error("\u062e\u0637\u0627 \u062f\u0631 \u0628\u0627\u0631\u06af\u0630\u0627\u0631\u06cc \u0644\u0648\u06af\u0648")},onSuccess:function(){y(t.url),Z.ZP.dismiss(r),Z.ZP.success("\u0628\u0627 \u0645\u0648\u0641\u0642\u06cc\u062a \u0628\u0627\u0631\u06af\u0630\u0627\u0631\u06cc \u0634\u062f")}});t.start()}},accept:"image/png, image/jpeg",id:"account-settings-upload-image",name:"image"})]}),(0,t.jsx)(C,{color:"error",variant:"outlined",onClick:function(){return y(""===S?"":S)},children:"\u0627\u0646\u0635\u0631\u0627\u0641"})]})]})}),(0,t.jsx)(i.ZP,{item:!0,xs:12,sm:6,children:(0,t.jsxs)(m.Z,{fullWidth:!0,sx:{mb:4},children:[(0,t.jsx)(d.Qr,{name:"name",control:H,rules:{required:!0},render:function(e){var n=e.field,r=n.value,o=n.onChange,a=n.onBlur;return(0,t.jsx)(u.Z,{label:"\u0646\u0627\u0645 \u0647\u0627\u0628",value:r,onBlur:a,onChange:o,error:Boolean(F.name)})}}),F.name&&(0,t.jsx)(h.Z,{sx:{color:"error.main"},children:F.name.message})]})}),(0,t.jsx)(i.ZP,{item:!0,xs:12,sm:6,children:(0,t.jsxs)(m.Z,{fullWidth:!0,sx:{mb:4},children:[(0,t.jsx)(d.Qr,{name:"tel_phone",control:H,rules:{required:!0},render:function(e){var n=e.field,r=n.value,o=n.onChange,a=n.onBlur;return(0,t.jsx)(u.Z,{label:"\u062a\u0644\u0641\u0646",value:r,onBlur:a,onChange:o,error:Boolean(F.tel_phone),inputProps:{maxLength:11},placeholder:"021*******",dir:"ltr"})}}),F.tel_phone&&(0,t.jsx)(h.Z,{sx:{color:"error.main"},children:F.tel_phone.message})]})}),(0,t.jsx)(i.ZP,{item:!0,xs:12,sm:6,children:(0,t.jsxs)(m.Z,{fullWidth:!0,sx:{mb:4},children:[(0,t.jsx)(d.Qr,{name:"fax",control:H,rules:{required:!0},render:function(e){var n=e.field,r=n.value,o=n.onChange,a=n.onBlur;return(0,t.jsx)(u.Z,{label:"\u0641\u06a9\u0633",value:r,onBlur:a,onChange:o,error:Boolean(F.fax),inputProps:{maxLength:12},dir:"ltr"})}}),F.fax&&(0,t.jsx)(h.Z,{sx:{color:"error.main"},children:F.fax.message})]})}),(0,t.jsx)(i.ZP,{item:!0,xs:12,sm:6,children:(0,t.jsxs)(m.Z,{fullWidth:!0,sx:{mb:4},children:[(0,t.jsx)(d.Qr,{fullWidth:!0,name:"state",control:H,rules:{required:!0},render:function(e){var n=e.field,r=n.onChange,o=n.value,a=n.onBlur;return(0,t.jsx)(x.Z,{onBlur:a,select:!0,options:p.ostan.map((function(e){return e.name})),onChange:function(e,n,t){return function(e,n,r){var t;n(r),T(null===(t=p.ostan.find((function(n){return n.name===e.target.innerText})))||void 0===t?void 0:t.id)}(e,r,n)},value:o,disableClearable:!0,renderInput:function(e){return(0,t.jsx)(u.Z,P({},e,{label:"\u0627\u0633\u062a\u0627\u0646",variant:"outlined",onChange:r,error:Boolean(F.state)}))}})}}),F.state&&(0,t.jsx)(h.Z,{sx:{color:"error.main"},children:F.state.message})]})}),(0,t.jsx)(i.ZP,{item:!0,xs:12,sm:6,children:(0,t.jsxs)(m.Z,{fullWidth:!0,sx:{mb:4},children:[(0,t.jsx)(d.Qr,{name:"city",control:H,rules:{required:!0},render:function(e){var n=e.field,r=n.value,o=n.onChange,a=n.onBlur;return(0,t.jsx)(x.Z,{onBlur:a,select:!0,options:p.shahr.filter((function(e){return e.ostan===A})).map((function(e){return e.name})),onChange:function(e,n){return o(n)},value:r,disableClearable:!0,renderInput:function(e){return(0,t.jsx)(u.Z,P({},e,{label:"\u0634\u0647\u0631",variant:"outlined",onChange:o,error:Boolean(F.city)}))}})}}),F.city&&(0,t.jsx)(h.Z,{sx:{color:"error.main"},children:F.city.message})]})}),(0,t.jsx)(i.ZP,{item:!0,xs:12,sm:6,children:(0,t.jsxs)(m.Z,{fullWidth:!0,sx:{mb:4},children:[(0,t.jsx)(d.Qr,{name:"economic_code",control:H,rules:{required:!0},render:function(e){var n=e.field,r=n.value,o=n.onChange,a=n.onBlur;return(0,t.jsx)(u.Z,{label:"\u06a9\u062f \u0627\u0642\u062a\u0635\u0627\u062f\u06cc",value:r,onBlur:a,onChange:o,error:Boolean(F.economic_code)})}}),F.economic_code&&(0,t.jsx)(h.Z,{sx:{color:"error.main"},children:F.economic_code.message})]})}),(0,t.jsx)(i.ZP,{item:!0,xs:12,sm:6,children:(0,t.jsxs)(m.Z,{fullWidth:!0,sx:{mb:4},children:[(0,t.jsx)(d.Qr,{name:"management_name",control:H,rules:{required:!0},render:function(e){var n=e.field,r=n.value,o=n.onChange,a=n.onBlur;return(0,t.jsx)(u.Z,{label:"\u0646\u0627\u0645 \u0645\u062f\u06cc\u0631 \u0639\u0627\u0645\u0644",value:r,onBlur:a,onChange:o,error:Boolean(F.management_name)})}}),F.management_name&&(0,t.jsx)(h.Z,{sx:{color:"error.main"},children:F.management_name.message})]})}),(0,t.jsx)(i.ZP,{item:!0,xs:12,sm:6,children:(0,t.jsxs)(m.Z,{fullWidth:!0,sx:{mb:4},children:[(0,t.jsx)(d.Qr,{name:"registration_number",control:H,rules:{required:!0},render:function(e){var n=e.field,r=n.value,o=n.onChange,a=n.onBlur;return(0,t.jsx)(u.Z,{label:"\u0634\u0645\u0627\u0631\u0647 \u062b\u0628\u062a",value:r,onBlur:a,onChange:o,error:Boolean(F.registration_number)})}}),F.registration_number&&(0,t.jsx)(h.Z,{sx:{color:"error.main"},children:F.registration_number.message})]})}),(0,t.jsx)(i.ZP,{item:!0,xs:12,sm:6,children:(0,t.jsxs)(m.Z,{fullWidth:!0,sx:{mb:4},children:[(0,t.jsx)(d.Qr,{name:"workshop_number",control:H,rules:{required:!0},render:function(e){var n=e.field,r=n.value,o=n.onChange,a=n.onBlur;return(0,t.jsx)(u.Z,{label:"\u06a9\u062f \u06a9\u0627\u0631\u06af\u0627\u0647",value:r,onBlur:a,onChange:o,error:Boolean(F.workshop_number)})}}),F.workshop_number&&(0,t.jsx)(h.Z,{sx:{color:"error.main"},children:F.workshop_number.message})]})}),(0,t.jsx)(i.ZP,{item:!0,xs:12,children:(0,t.jsx)(c.Z,{variant:"contained",type:"submit",sx:{mr:4},children:"\u0630\u062e\u06cc\u0631\u0647 \u062a\u063a\u06cc\u06cc\u0631\u0627\u062a"})})]})}):(0,t.jsx)(g.Z,{variant:"p",children:"\u062f\u0631 \u062d\u0627\u0644 \u062f\u0631\u06cc\u0627\u0641\u062a \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0647\u0627\u0628"})})}},83053:function(e,n,r){r.r(n),r.d(n,{default:function(){return h},editHub:function(){return m},fetchData:function(){return c},fetchLogo:function(){return d}});var t=r(34051),o=r.n(t),a=r(85893),i=r(5370),s=r(63543);function u(e,n,r,t,o,a,i){try{var s=e[a](i),u=s.value}catch(l){return void r(l)}s.done?n(u):Promise.resolve(u).then(t,o)}function l(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var a=e.apply(n,r);function i(e){u(a,t,o,i,s,"next",e)}function s(e){u(a,t,o,i,s,"throw",e)}i(void 0)}))}}var c=function(){var e=l(o().mark((function e(n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.get(s.Z.myHub,n,{Authorization:"Bearer ".concat(window.localStorage.getItem("access_Token"))});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),d=function(){var e=l(o().mark((function e(n){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.get(s.Z.getLogo,n,{Authorization:"Bearer ".concat(window.localStorage.getItem("access_Token"))});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),m=function(){var e=l(o().mark((function e(n,r){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.put(s.Z.singleHub(n),r,{Authorization:"Bearer ".concat(window.localStorage.getItem("access_Token"))});case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}();function h(){return(0,a.jsx)("div",{})}}}]);